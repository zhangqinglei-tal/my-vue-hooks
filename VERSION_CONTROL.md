# ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½è¯´æ˜

æœ¬é¡¹ç›®å·²é›†æˆå®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒæµç¨‹ï¼Œæ”¯æŒå°† hooks æ‰“åŒ…ä¸º SDK è¿›è¡Œå‘å¸ƒã€‚

## ğŸ“¦ SDK æ‰“åŒ…é…ç½®

### æ„å»ºè¾“å‡º

- **ES æ¨¡å—**: `dist/my-hooks.es.js` - æ”¯æŒç°ä»£æ‰“åŒ…å·¥å…·
- **CommonJS**: `dist/my-hooks.cjs.js` - æ”¯æŒ Node.js ç¯å¢ƒ
- **ç±»å‹å®šä¹‰**: `dist/**/*.d.ts` - TypeScript ç±»å‹æ”¯æŒ
- **Source Map**: åŒ…å«å®Œæ•´çš„æºç æ˜ å°„ï¼Œä¾¿äºè°ƒè¯•

### Tree Shaking æ”¯æŒ

- ä½¿ç”¨ `preserveModules` ä¿æŒæ¨¡å—ç»“æ„
- æ”¯æŒæŒ‰éœ€å¯¼å…¥ï¼Œå‡å°‘æ‰“åŒ…ä½“ç§¯
- æ¯ä¸ª hook éƒ½å¯ä»¥ç‹¬ç«‹å¯¼å…¥

### ç‰ˆæœ¬ä¿¡æ¯æ³¨å…¥

æ„å»ºæ—¶è‡ªåŠ¨æ³¨å…¥ç‰ˆæœ¬å·åˆ°ä»£ç ä¸­ï¼š

```ts
import { VERSION, getVersion } from 'my-hooks'

console.log(VERSION)        // "1.0.0"
console.log(getVersion())    // "1.0.0"
```

## ğŸ”¢ ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬å·è§„åˆ™

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/) è§„èŒƒï¼š

- **MAJOR** (ä¸»ç‰ˆæœ¬å·): ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **MINOR** (æ¬¡ç‰ˆæœ¬å·): å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢
- **PATCH** (ä¿®è®¢å·): å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### ç‰ˆæœ¬ç®¡ç†è„šæœ¬

#### æ›´æ–°ç‰ˆæœ¬å·

```bash
# è¡¥ä¸ç‰ˆæœ¬ (1.0.0 -> 1.0.1)
pnpm version:patch

# æ¬¡ç‰ˆæœ¬ (1.0.0 -> 1.1.0)
pnpm version:minor

# ä¸»ç‰ˆæœ¬ (1.0.0 -> 2.0.0)
pnpm version:major

# ç›´æ¥æŒ‡å®šç‰ˆæœ¬å·
node scripts/version.js 1.2.3
```

#### è‡ªåŠ¨å‘å¸ƒæµç¨‹

```bash
# è‡ªåŠ¨å®Œæˆç‰ˆæœ¬æ›´æ–°ã€æµ‹è¯•ã€æ„å»ºã€CHANGELOG æ›´æ–°
pnpm release:patch   # æˆ– :minor, :major
```

## ğŸš€ å‘å¸ƒæµç¨‹

### è‡ªåŠ¨å‘å¸ƒï¼ˆæ¨èï¼‰

```bash
# ä¸€é”®å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬
pnpm release:patch

# ä¸€é”®å‘å¸ƒæ¬¡ç‰ˆæœ¬
pnpm release:minor

# ä¸€é”®å‘å¸ƒä¸»ç‰ˆæœ¬
pnpm release:major
```

å‘å¸ƒè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œï¼š
1. âœ… æ£€æŸ¥ Git å·¥ä½œåŒºæ˜¯å¦å¹²å‡€
2. âœ… è¿è¡Œæ‰€æœ‰æµ‹è¯•
3. âœ… TypeScript ç±»å‹æ£€æŸ¥
4. âœ… æ›´æ–°ç‰ˆæœ¬å·ï¼ˆpackage.jsonï¼‰
5. âœ… æ›´æ–° CHANGELOG.md
6. âœ… æ„å»ºé¡¹ç›®

### æ‰‹åŠ¨å‘å¸ƒæ­¥éª¤

1. **æ›´æ–°ç‰ˆæœ¬å·**
   ```bash
   pnpm version:patch
   ```

2. **æ›´æ–° CHANGELOG.md**
   ç¼–è¾‘ `CHANGELOG.md`ï¼Œæ·»åŠ æ–°ç‰ˆæœ¬çš„å˜æ›´è®°å½•

3. **æ„å»ºé¡¹ç›®**
   ```bash
   pnpm build
   ```

4. **è¿è¡Œæµ‹è¯•**
   ```bash
   pnpm test:run
   ```

5. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "chore: release v1.0.1"
   git tag v1.0.1
   ```

6. **æ¨é€åˆ°è¿œç¨‹**
   ```bash
   git push && git push --tags
   ```

7. **å‘å¸ƒåˆ° npm**
   ```bash
   npm publish
   ```

## âœ… å‘å¸ƒå‰æ£€æŸ¥

åœ¨ `npm publish` ä¹‹å‰ï¼Œä¼šè‡ªåŠ¨è¿è¡Œ `prepublishOnly` è„šæœ¬ï¼š

- âœ… æ£€æŸ¥ `dist` ç›®å½•æ˜¯å¦å­˜åœ¨
- âœ… æ£€æŸ¥å¿…è¦çš„æ„å»ºæ–‡ä»¶
- âœ… è¿è¡Œæµ‹è¯•å¥—ä»¶
- âœ… TypeScript ç±»å‹æ£€æŸ¥
- âœ… éªŒè¯ package.json é…ç½®

å¦‚æœä»»ä½•æ£€æŸ¥å¤±è´¥ï¼Œå‘å¸ƒå°†è¢«é˜»æ­¢ã€‚

## ğŸ“ CHANGELOG ç®¡ç†

### è‡ªåŠ¨ç”Ÿæˆ

ä½¿ç”¨ `pnpm release` ä¼šè‡ªåŠ¨åœ¨ `CHANGELOG.md` ä¸­æ·»åŠ æ–°ç‰ˆæœ¬æ¡ç›®ã€‚

### æ‰‹åŠ¨ç¼–è¾‘

éµå¾ª [Keep a Changelog](https://keepachangelog.com/) æ ¼å¼ï¼š

```markdown
## [1.0.1] - 2024-01-15

### Fixed
- ä¿®å¤ useCounter çš„è¾¹ç•Œå€¼é—®é¢˜

### Changed
- ä¼˜åŒ– useLocalStorage çš„æ€§èƒ½
```

## ğŸ”§ é…ç½®æ–‡ä»¶

### package.json

- `version`: å½“å‰ç‰ˆæœ¬å·
- `files`: å‘å¸ƒæ—¶åŒ…å«çš„æ–‡ä»¶ï¼ˆä»… `dist` ç›®å½•ï¼‰
- `sideEffects`: æ ‡è®°ä¸ºæ— å‰¯ä½œç”¨ï¼Œæ”¯æŒ tree shaking
- `exports`: å®Œæ•´çš„å¯¼å‡ºæ˜ å°„ï¼Œæ”¯æŒæŒ‰éœ€å¯¼å…¥

### vite.config.ts

- è‡ªåŠ¨æ³¨å…¥ç‰ˆæœ¬å·åˆ°æ„å»ºäº§ç‰©
- é…ç½® tree shaking æ”¯æŒ
- ç”Ÿæˆ source map

### scripts/

- `version.js`: ç‰ˆæœ¬å·ç®¡ç†è„šæœ¬
- `release.js`: è‡ªåŠ¨å‘å¸ƒè„šæœ¬
- `prepublish.js`: å‘å¸ƒå‰æ£€æŸ¥è„šæœ¬

## ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯ä½¿ç”¨

### åœ¨ä»£ç ä¸­è·å–ç‰ˆæœ¬

```ts
import { VERSION, getVersion } from 'my-hooks'

// ç›´æ¥ä½¿ç”¨å¸¸é‡
console.log(VERSION)

// ä½¿ç”¨å‡½æ•°
console.log(getVersion())
```

### åœ¨æ„å»ºäº§ç‰©ä¸­

æ„å»ºåçš„æ–‡ä»¶ä¼šåŒ…å«ç‰ˆæœ¬ä¿¡æ¯ bannerï¼š

```js
/*! my-hooks v1.0.0 | MIT License */
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨ `0.x.x` ç‰ˆæœ¬å·
2. **ç¨³å®šç‰ˆæœ¬**: ä» `1.0.0` å¼€å§‹
3. **é‡å¤§å˜æ›´**: å‡çº§ä¸»ç‰ˆæœ¬å·
4. **æ–°åŠŸèƒ½**: å‡çº§æ¬¡ç‰ˆæœ¬å·
5. **Bug ä¿®å¤**: å‡çº§ä¿®è®¢å·
6. **å‘å¸ƒå‰**: å§‹ç»ˆè¿è¡Œ `pnpm release` ç¡®ä¿æ‰€æœ‰æ£€æŸ¥é€šè¿‡
7. **CHANGELOG**: åŠæ—¶æ›´æ–°å˜æ›´è®°å½•

## ğŸ” éªŒè¯å‘å¸ƒ

### æ£€æŸ¥å‘å¸ƒå†…å®¹

```bash
# æŸ¥çœ‹å°†è¦å‘å¸ƒçš„å†…å®¹
npm pack --dry-run

# æ‰“åŒ…ä½†ä¸å‘å¸ƒ
npm pack
```

### æŸ¥çœ‹å·²å‘å¸ƒç‰ˆæœ¬

```bash
# æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬
npm view my-hooks versions

# æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯
npm view my-hooks

# æŸ¥çœ‹ç‰¹å®šç‰ˆæœ¬
npm view my-hooks@1.0.0
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å‘å¸ƒæŒ‡å—](./RELEASE.md) - è¯¦ç»†çš„å‘å¸ƒæµç¨‹è¯´æ˜
- [é¡¹ç›®ç»“æ„](./PROJECT_STRUCTURE.md) - é¡¹ç›®ç»“æ„è¯´æ˜
- [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md) - å¦‚ä½•è´¡çŒ®ä»£ç 

